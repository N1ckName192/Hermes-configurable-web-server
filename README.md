# Hermes - конфигурируемый веб-сервер

Hermes — это высокопроизводительный веб-сервер на C++, поддерживающий HTTP, маршрутизацию, проксирование и чистый TCP. Он построен с использованием библиотек Boost.Beast (для HTTP) и Boost.Asio (для асинхронного ввода-вывода).

## Возможности

- **HTTP-сервер**: Полноценная поддержка HTTP/1.1 с асинхронной обработкой запросов
- **Маршрутизация**: Гибкая система маршрутизации HTTP-запросов с различными типами обработчиков
- **TCP-сервер**: Поддержка чистых TCP-соединений для низкоуровневых протоколов
- **Проксирование**: Возможность проксировать запросы на другие серверы
- **Многопоточность**: Эффективное использование нескольких потоков для обработки запросов
- **JSON-конфигурация**: Настройка сервера через понятный JSON-файл

## Требования

- C++20 совместимый компилятор (GCC 10+, Clang 10+, MSVC 2019+)
- CMake 3.15 или выше
- Boost 1.75.0 или выше

## Сборка

```bash
mkdir build
cd build
cmake ..
cmake --build . --config Release
```

## Конфигурация

Настройка сервера выполняется через JSON-файл. Пример конфигурации:

```json
{
    "server": {
        "host": "0.0.0.0",
        "port": 8080,
        "threads": 4
    },
    "features": {
        "http": true,
        "tcp": true,
        "proxy": true
    },
    "routes": [
        {
            "path": "/",
            "type": "static",
            "content": "Привет от Hermes!",
            "content_type": "text/plain; charset=utf-8"
        },
        {
            "path": "/api/echo",
            "type": "echo"
        },
        {
            "path": "/api/time",
            "type": "time"
        },
        {
            "path": "/proxy",
            "type": "proxy",
            "target": "http://example.com"
        }
    ]
}
```

## Запуск

```bash
./Hermes [путь_к_конфигу]
```

Если путь к конфигу не указан, сервер будет искать файл `hermes.json` в текущей директории.

## Типы маршрутов

Hermes поддерживает следующие типы маршрутов:

1. **static** - статический контент, задаваемый в конфигурации
2. **echo** - возвращает тело запроса обратно клиенту
3. **time** - возвращает текущее время сервера
4. **proxy** - проксирует запрос на указанный target-сервер

## Архитектура

Hermes построен на модульной архитектуре с четким разделением ответственности:

- **Config** - загрузка и хранение конфигурации
- **Logger** - простая система логирования
- **Router** - маршрутизация HTTP-запросов к соответствующим обработчикам
- **HttpServer** - обработка HTTP-соединений с использованием Boost.Beast
- **TcpServer** - обработка чистых TCP-соединений с использованием Boost.Asio
- **ProxyHandler** - проксирование HTTP-запросов на внешние серверы

## Особенности реализации

- Асинхронная обработка запросов для высокой производительности
- Эффективное использование пула потоков для параллельной обработки запросов
- Корректная обработка сигналов для graceful shutdown
- Четкое разделение между HTTP и TCP обработкой

## Использование для разработки

Сервер можно использовать для:
- Быстрого прототипирования веб-приложений
- Реализации API-серверов
- Создания прокси-серверов
- Низкоуровневых TCP-служб
- Балансировки нагрузки

## Лицензия

Свободно распространяемое ПО. Используйте на свой страх и риск.
